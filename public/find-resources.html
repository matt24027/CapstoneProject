<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Find Resources - ShelterLink">
  <meta name="author" content="ShelterLink Team">
  <title>Find Resources - ShelterLink</title>

  <!-- Bootstrap core CSS -->
  <link href="assets/css/bootstrap.css" rel="stylesheet">
  <link href="assets/css/styles.css" rel="stylesheet">
  <link href="assets/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>

<div id="navbar-main"> 
  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <div class="pull-left logo">
          <a href="index.html"><img src="assets/img/transparent logo2.png" alt="ShelterLink Logo"></a>
        </div>
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"> 
          <span class="icon-bar"></span> 
          <span class="icon-bar"></span> 
          <span class="icon-bar"></span> 
        </button>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav pull-right">
            <li><a href="index.html">Home</a></li>
            <li><a href="our-mission.html">Our Mission</a></li>
            <li><a href="our-team.html">Our Team</a></li>
            <li><a href="find-resources.html">Find Resources</a></li>
            <li><a href="get-in-touch.html">Get In Touch</a></li>
          </ul>
      </div>
    </div>
  </div>
</div>



<!-- MAP SECTION -->

<div id="map-section" class="container">
  <h2 class="centered">Find Resources Near You</h2>
  <div id="map" style="height: 500px;"></div>
</div>

<!-- LEAFLET MAP SCRIPT -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  var map = L.map('map').setView([35.9932689, -78.8957218], 13);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 18,
    attribution: 'Â© OpenStreetMap contributors'
  }).addTo(map);

  async function loadResourceMarkers() {
    try {
      const response = await fetch('/api/resources');
      const resources = await response.json();
      resources.forEach(resource => {
        const marker = L.marker([resource.latitude, resource.longitude]).addTo(map);
        marker.bindPopup(`<b>${resource.name}</b><br>${resource.description}`);
        marker.bindTooltip(`${resource.name}<br>${resource.address || ''}`, {
          permanent: false,
          direction: "top"
        });
      });
    } catch (error) {
      console.error('Error loading resources:', error);
    }
  }

  loadResourceMarkers();
</script>

<!-- JavaScript Files -->
<script src="assets/js/bootstrap.min.js"></script>
</body>
</html>
